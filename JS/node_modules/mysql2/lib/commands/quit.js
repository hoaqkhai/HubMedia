'use strict';

const Command = require('./command.js');
const CommandCode = require('../constants/commands.js');
const Packet = require('../packets/packet.js');

class Quit extends Command {
  constructor(callback) {
    super();
<<<<<<< HEAD
    this.onResult = callback;
=======
    this.done = callback;
>>>>>>> 5247a51d76e8a77a7e757084e5f84ee459ae7d98
  }

  start(packet, connection) {
    connection._closing = true;
    const quit = new Packet(
      0,
      Buffer.from([1, 0, 0, 0, CommandCode.QUIT]),
      0,
      5
    );
<<<<<<< HEAD
    if (this.onResult) {
      this.onResult();
=======
    if (this.done) {
      this.done();
>>>>>>> 5247a51d76e8a77a7e757084e5f84ee459ae7d98
    }
    connection.writePacket(quit);
    return null;
  }
}

module.exports = Quit;
